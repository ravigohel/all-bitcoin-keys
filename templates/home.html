{% extends "base.html" %}

{% block title %}Browse Keys - All Key{% endblock %}

{% block content %}
<div class="bg-white rounded-lg shadow-lg m-4 p-6">
    <!-- Top Navigation -->
    <div class="mb-6 pb-4 border-b border-gray-200">
        <div class="text-center mb-4">
            <div class="text-lg font-semibold text-gray-800">Page {{ format_scientific_notation(page) }} ({{ page_percentage }}%)</div>
            <div class="text-sm text-gray-500">{{ format_scientific_notation(max_page) }} total pages</div>
        </div>
        <div class="flex justify-center items-center gap-2 flex-wrap">
            <!-- First Button -->
            <a href="{{ url_for('home_page', page=1) if page > 1 else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page <= 1 %}opacity-50 cursor-not-allowed{% endif %}">
                <span>⏮</span>
                <span>First</span>
            </a>
            <!-- Previous Button -->
            <a href="{{ url_for('home_page', page=page-1) if page > 1 else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page <= 1 %}opacity-50 cursor-not-allowed{% endif %}">
                <span>←</span>
                <span>Previous</span>
            </a>
            <!-- Random Button -->
            <a href="{{ url_for('random_page') }}"
               class="flex items-center gap-1 px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors text-sm">
                <span>🎲</span>
                <span>Random</span>
            </a>
            <!-- Next Button -->
            <a href="{{ url_for('home_page', page=page+1) if page < max_page else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page >= max_page %}opacity-50 cursor-not-allowed{% endif %}">
                <span>Next</span>
                <span>→</span>
            </a>
            <!-- Last Button -->
            <a href="{{ url_for('home_page', page=max_page) if page < max_page else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page >= max_page %}opacity-50 cursor-not-allowed{% endif %}">
                <span>Last</span>
                <span>⏭</span>
            </a>
        </div>
    </div>

    <table class="table-auto w-full font-mono font-light">
        <thead class="text-gray-500 border-b border-b-slate-200">
            <tr>
                {% for column in table_header_columns %}
                <td class="px-4 py-2 whitespace-nowrap">{{ column }}</td>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr class="hover:bg-slate-100 border-b border-b-slate-100">
                <td class="px-4 py-2 whitespace-nowrap">
                    <div class="flex items-center gap-2">
                        <span class="font-mono">{{ truncate_text(item.private_key, 7, 9) }}</span>
                        <button onclick="copyToClipboard('{{ item.private_key }}')" 
                                class="text-gray-400 hover:text-gray-600 transition-colors" 
                                title="Copy private key">
                            📋
                        </button>
                    </div>
                </td>
                <td class="px-4 py-2 whitespace-nowrap">
                    <div class="flex items-center gap-2">
                        <a href="https://www.blockchain.com/btc/address/{{ item.address_uncompressed }}"
                           target="_blank"
                           class="text-blue-500 hover:text-blue-900 hover:underline font-mono">
                            {{ truncate_text(item.address_uncompressed, 9, 7) }}
                        </a>
                        <button onclick="copyToClipboard('{{ item.address_uncompressed }}')" 
                                class="text-gray-400 hover:text-gray-600 transition-colors" 
                                title="Copy address">
                            📋
                        </button>
                    </div>
                </td>
                <td class="px-4 py-2 whitespace-nowrap {{ get_balance_class(item.address_uncompressed_balance) }}">
                    {{ format_balance(item.address_uncompressed_balance) }}
                </td>
                <td class="px-4 py-2 whitespace-nowrap {{ get_balance_class(item.address_uncompressed_received) }}">
                    {{ format_balance(item.address_uncompressed_received) }}
                </td>
                <td class="px-4 py-2 whitespace-nowrap">
                    <div class="flex items-center gap-2">
                        <a href="https://www.blockchain.com/btc/address/{{ item.address_compressed }}"
                           target="_blank"
                           class="text-blue-500 hover:text-blue-900 hover:underline font-mono">
                            {{ truncate_text(item.address_compressed, 9, 7) }}
                        </a>
                        <button onclick="copyToClipboard('{{ item.address_compressed }}')" 
                                class="text-gray-400 hover:text-gray-600 transition-colors" 
                                title="Copy address">
                            📋
                        </button>
                    </div>
                </td>
                <td class="px-4 py-2 whitespace-nowrap {{ get_balance_class(item.address_compressed_balance) }}">
                    {{ format_balance(item.address_compressed_balance) }}
                </td>
                <td class="px-4 py-2 whitespace-nowrap {{ get_balance_class(item.address_compressed_received) }}">
                    {{ format_balance(item.address_compressed_received) }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Bottom Navigation -->
    <div class="mt-6 pt-4 border-t border-gray-200">
        <div class="text-center mb-4">
            <div class="text-sm text-gray-600">{{ format_scientific_notation(page) }} of {{ format_scientific_notation(max_page) }} ({{ page_percentage }}%)</div>
        </div>
        <div class="flex justify-center items-center gap-2 flex-wrap">
            <!-- First Button -->
            <a href="{{ url_for('home_page', page=1) if page > 1 else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page <= 1 %}opacity-50 cursor-not-allowed{% endif %}">
                <span>⏮</span>
                <span>First</span>
            </a>
            <!-- Previous Button -->
            <a href="{{ url_for('home_page', page=page-1) if page > 1 else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page <= 1 %}opacity-50 cursor-not-allowed{% endif %}">
                <span>←</span>
                <span>Previous</span>
            </a>
            <!-- Random Button -->
            <a href="{{ url_for('random_page') }}"
               class="flex items-center gap-1 px-3 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors text-sm">
                <span>🎲</span>
                <span>Random</span>
            </a>
            <!-- Next Button -->
            <a href="{{ url_for('home_page', page=page+1) if page < max_page else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page >= max_page %}opacity-50 cursor-not-allowed{% endif %}">
                <span>Next</span>
                <span>→</span>
            </a>
            <!-- Last Button -->
            <a href="{{ url_for('home_page', page=max_page) if page < max_page else '#' }}"
               class="flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm {% if page >= max_page %}opacity-50 cursor-not-allowed{% endif %}">
                <span>Last</span>
                <span>⏭</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}
