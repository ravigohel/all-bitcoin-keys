{% extends "base.html" %}

{% block title %}Find Address - All Key{% endblock %}

{% block content %}
<div class="bg-white rounded-lg shadow-lg m-4 p-6">
    <h1 class="text-2xl font-bold mb-4">🔍 Find Bitcoin Address</h1>
    <p class="text-gray-600 mb-6">Enter a Bitcoin address to find which page it's located on and get its private key</p>
    
    <form method="GET" action="{{ url_for('search') }}" class="mb-6">
        <div class="space-y-4">
            <div class="flex gap-2">
                <input type="text" 
                       name="address" 
                       value="{{ address if address else '' }}"
                       placeholder="Enter Bitcoin address (e.g., 1BgGZ9tcN4rm9KBzDn7KprQz87SZ26SAMH)"
                       class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                       required>
                <button type="submit" 
                        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500">
                    Search
                </button>
            </div>
            <div class="flex items-center gap-4">
                <label for="start_page" class="text-sm font-medium text-gray-700">
                    Start search from page:
                </label>
                <input type="number" 
                       name="start_page" 
                       id="start_page"
                       value="{{ start_page if start_page else 1 }}"
                       min="1" 
                       class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <span class="text-sm text-gray-500">
                    (Default: 1, Searches up to 1000 pages)
                </span>
            </div>
        </div>
    </form>

    {% if error %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
            {{ error }}
        </div>
    {% endif %}

    {% if address and page %}
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
            <h2 class="text-lg font-semibold mb-2">Address Found!</h2>
            <div class="space-y-2">
                <p><strong>Address:</strong> 
                    <code class="bg-gray-100 px-2 py-1 rounded font-mono">{{ truncate_text(address, 5, 3) }}</code>
                    <button onclick="copyToClipboard('{{ address }}')" 
                            class="ml-2 text-gray-400 hover:text-gray-600 transition-colors" 
                            title="Copy address">
                        📋
                    </button>
                </p>
                <p><strong>Page:</strong> {{ page }}</p>
                <p><strong>Position:</strong> {{ position }} of {{ ADDRESSES_PER_PAGE }}</p>
                <p><strong>Type:</strong> {{ 'Compressed' if is_compressed else 'Uncompressed' }}</p>
                <p><strong>Private Key:</strong> 
                    <code class="bg-gray-100 px-2 py-1 rounded font-mono">{{ truncate_text(private_key, 5, 3) }}</code>
                    <button onclick="copyToClipboard('{{ private_key }}')" 
                            class="ml-2 text-gray-400 hover:text-gray-600 transition-colors" 
                            title="Copy private key">
                        📋
                    </button>
                </p>
                {% if start_page and start_page > 1 %}
                <p><strong>Search Range:</strong> Pages {{ start_page }} to {{ start_page + MAX_SEARCH_PAGES - 1 }}</p>
                {% endif %}
            </div>
            
            <div class="mt-4">
                <a href="{{ url_for('home_page', page=page) }}" 
                   class="inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                    Go to Page {{ page }}
                </a>
            </div>
        </div>
    {% endif %}

    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
        <h3 class="text-lg font-semibold mb-2">🔍 How to use the search:</h3>
        <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
            <li>Enter a Bitcoin address in the search box above</li>
            <li>Optionally specify a starting page (default: 1)</li>
            <li>The search will find which page contains that address</li>
            <li>You'll see the page number, position, and private key</li>
            <li>Click "Go to Page" to view the address in the main table</li>
            <li>Use the copy buttons (📋) to copy full addresses or private keys</li>
            <li>Search is limited to 1000 pages from the starting page for performance</li>
            <li>Starting page can be set to any number 1 or greater for flexible searching</li>
        </ul>
    </div>

    <div class="mt-4">
        <h3 class="text-lg font-semibold mb-2">📝 Example addresses to try:</h3>
        <div class="space-y-1 text-sm">
            <p><code class="bg-gray-100 px-2 py-1 rounded font-mono">{{ truncate_text('1BgGZ9tcN4rm9KBzDn7KprQz87SZ26SAMH', 5, 3) }}</code> (Page 1, Position 1, Compressed)</p>
            <p><code class="bg-gray-100 px-2 py-1 rounded font-mono">{{ truncate_text('1EHNa6Q4Jz2uvNExL497mE43ikXhwF6kZm', 5, 3) }}</code> (Page 1, Position 1, Uncompressed)</p>
        </div>
    </div>

    <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <h3 class="text-lg font-semibold mb-2 text-blue-800">💡 Current Application Features</h3>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
            <div>
                <h4 class="font-semibold mb-1">Display Features:</h4>
                <ul class="list-disc list-inside space-y-1 text-blue-700">
                    <li>Truncated private keys and addresses</li>
                    <li>Copy buttons for full text</li>
                    <li>Green highlighting for non-zero balances</li>
                    <li>Page total balance in navigation</li>
                </ul>
            </div>
            <div>
                <h4 class="font-semibold mb-1">Performance Features:</h4>
                <ul class="list-disc list-inside space-y-1 text-blue-700">
                    <li>200 addresses per page</li>
                    <li>Concurrent API requests</li>
                    <li>Intelligent caching</li>
                    <li>Configurable balance checking</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
